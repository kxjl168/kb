<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">













<script type="text/javascript"
	src="/kb/js/plugin/ie8/check.js"></script>
	
	
	<script language="javascript" type="text/javascript"
	src="/kb/js/plugin/date/My97DatePicker/WdatePicker.js"></script>
	

<script type="text/javascript"
	src="/kb/js/plugin/jquery/jquery.v1.11.3.js"></script>

<script type="text/javascript"
	src="/kb/js/plugin/jquery/jquery.history.js"></script>

	

<script type="text/javascript"
	src="/kb/js/plugin/jquery/jquery.form.js"></script>
	
	

<link rel="stylesheet" href="/kb/css/tooltip.css">


<link rel="stylesheet" href="/kb/css/font-awesome-4.7.0/css/font-awesome.min.css">
	
	

<script>
    	var basePath = "/kb";
    	var webctx="/kb";
    	
    	var lstheight=700;
    var siteurl="http://127.0.0.1:8081/kb";
    	//var siteurl="http://test.256kb.cn/kb";
    	var  sitetitle="KxのBook -256kb.cn | 野生的喵喵 的个人站点  ";
    	//var siteurl="https://256kb.cn/";
    	
    	//var path="";
    
</script>




<html>
<head>


<link rel="bookmark" type="image/x-icon" href="/kb/favicon.ico" />
<link rel="shortcut icon" href="/kb/favicon.ico" />

<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width,user-scalable=no, initial-scale=1">
<meta name="fragment" content="!">
<meta name="keywords" content="KxのBook,256kb,野生的喵喵,个人站点">
<meta name="description" content="KxのBook -256kb.cn | 野生的喵喵 的个人站点 | 分享工作及生活的点滴" />
<meta name="author" content="ZHANG JIE">
<title id="t1"></title>
<title id="t2">KxのBook -256kb.cn | 野生的喵喵 的个人站点 | 分享工作及生活的点滴</title>

<link rel="stylesheet" type="text/css" media="screen"
	href="/kb/js/plugin/bootstrap/css/bootstrap.min.css">



<script type="text/javascript"
	src="/kb/js/plugin/jquery/jquery.v1.11.3.js"></script>




<script type="text/javascript"
	src="/kb/js/plugin/angular/angular.min.js"></script>

<script type="text/javascript"
	src="/kb/js/plugin/angular/angular-sanitize.min.js"></script>

<script src="/kb/js/own/menu.js"></script>
<script src="/kb/js/own/loading.js"></script>

<link rel="stylesheet"
	href="/kb/js/plugin/ckeditor4.8/plugins/codesnippet/lib/highlight/styles/obsidian.css">


	<script type="text/javascript"
		src="/kb/js/plugin/ckeditor4.8/plugins/codesnippet/lib/highlight/highlight.pack.js"></script>
	
<script type="text/javascript"
	src="/kb/js/plugin/jquery/jquery.validate.js"></script>

<script type="text/javascript" src="/kb/js/own/kvalidate.js"></script>




	
	  <link  rel="stylesheet"
	href="/kb/js/own/kpro.css"></link>
	 							 



<script type="text/javascript"
	src="/kb/js/plugin/angular/angular.min.js"></script>
<script type="text/javascript"
	src="/kb/js/plugin/angular/angular-resource.min.js"></script>



<link rel="stylesheet"
	href="/kb/js/plugin/ckeditor4.8/plugins/codesnippet/lib/highlight/styles/default.css">
	<link rel="stylesheet"
		href="/kb/js/plugin/ckeditor4.8/plugins/codesnippet/lib/highlight/styles/obsidian.css">

		<script type="text/javascript"
			src="/kb/js/plugin/ckeditor4.8/plugins/codesnippet/lib/highlight/highlight.pack.js"></script>
		<link rel="stylesheet"
			href="/kb/js/own/automenu/jquery.autoMenu.css">



<link rel="stylesheet" href="/kb/css/kCommon.css">
<link rel="stylesheet" href="/kb/css/common.css">
<link rel="stylesheet" href="/kb/css/k2020.css">


</head>
<body   class="k2020" id="ngSection" ng-app="myApp" ng-controller="eduCtrl" >
<script type="text/javascript" src="/kb/js/own/kpro.js"></script>
	
	<script type="text/javascript" src="/kb/js/plugin/facybox3/jquery.fancybox.js"></script>

	<link rel="stylesheet" href="/kb/js/plugin/facybox3/jquery.fancybox.min.css">
	
	
	

	
<div id="ftop" class="navbar-fixed-top ">
	<nav class="top3 navbar  navbar-kindex" role="navigation">

		<div class="navbar-header public">
			<button type="button" id="menuBtn" class="navbar-toggle"
				data-toggle="collapse" data-target="#menuItem">
				<span class="sr-only"></span><span class="fa fa-navicon  "></span> <span class=""></span>
			</button>
			<a  class="pc navbar-brand  toptitle " href="#" ng-cloak>KxのBOOK</a>
			<a id="toptitle" class="mobile navbar-brand  toptitle " href="#" ng-cloak>野生的喵喵's BOOK</a>



		</div>
		<div>
			<div class="collapse navbar-collapse  " id="menuItem">
				<ul class="hide nav navbar-nav ">

				</ul>
				<form class="hide navbar-form navbar-left " role="search"></form>

				<ul class="nav navbar-nav " id="menuul">


				</ul>


			</div>
		</div>
	</nav>


</div>
<div class="thead">
	<div class=" sidebar-container ">



		<div id="mhead" class="short-about">

			<img class="phead" src="http://127.0.0.1:8081/kb/file/apk/202011/4e3a033d-6286-4f99-9bf2-3d588b4650db_orign.png"> 
			
			<div class="hgroup">
			<a class="navbar-brand toptitle"
				href="/kb/public/about/">野生的喵喵’s BOOK</a>
			<p>人生不是竞技，不必把撞线当成最大的光荣。当了第一的人也许是脆弱的，众人之上的滋味尝尽，如再有下落，感受的可能就是悲凉，于是，就将永远向前。站在第一位置的人不一定是胜者，每一次第一总是一时的风光，却赌不来一世的顺畅 --白岩松</p>
			</div>
		</div>


	</div>
</div>
<nav class="hide top2 navbar navbar-default margin-bottom-0 "
	role="navigation">
	<div style="background-color: red; border: 1px solid #777;"></div>

</nav>

<script>
  $(function(){
	 if($("#t1").html()=="")
		 $("#t1").html($("#t2").html());
  });
</script>


	<div class="pdcontent" id="content" style="">



		<div class=" row row-margin-top-70">

		<div class=" pall col-xs-12 is-open" style="min-height: 500px;">

			<div id="pgdiv" name="pgdiv"
				class="col-sm-9 col-xs-12 pleft rightline">
				

	<input type="hidden" value="mysql,存储过程" id="tagstrval" />
	<input type="hidden" value="b95ee7f5-8cd1-471b-8ba8-ad1fb6e9a4ab" id="imei" />


	<div class="" id="content" style="">




		<div class="wrapper col-xs-12  nopaddding">

			<div id="pleft" ng-cloak>
				<div>

					<div class="row col-xs-12  nopaddding">

						<div class="nopadding-left">
							<img class="nopaddding img-responsive col-xs-2"
								style="width: 25px; height: 25px;"
								title="日常问题记录" src="http://127.0.0.1:8081/kb/file/apk/201801/8c9e3ea9-5b97-44c5-91ae-efd3e2355110.png">
								<div class="col-sm-8 col-xs-11 ptitle  ">Mysql存储过程</div>




								<div class="col-sm-12 col-xs-12 pagetagdv ">
									<i class="fa fa-tags"></i>



									
										<a title="mysql"
											href="/kb/public/index/tg/mysql.html"><span
											class="ant-tag ant-tag-has-color">mysql</span> </a>

									
										<a title="存储过程"
											href="/kb/public/index/tg/存储过程.html"><span
											class="ant-tag ant-tag-has-color">存储过程</span> </a>

									


								</div>
						</div>
					</div>


					<div class="postdiv row col-xs-12 margin-top-5 ">
						<span title="发布时间"><i class="fa fa-calendar"></i>&nbsp;2017-12-28 10:44:20</span>&nbsp;
						<span title="围观次数"> <i class="fa fa-child">&nbsp;</i><span
							id="rdnum">395</span>&nbsp;
						</span> <span title="吐槽次数"> <i class="fa fa-comments">&nbsp;</i><span
							id="rpnum">22</span>&nbsp;
						</span> <span title="爬虫造访次数"><i class="fa fa-bug"></i>&nbsp;<span
							id="spidernum"></span></span> <i ng-click="ff()" style=""
							class="ctrl nopaddding img-responsive col-xs-2 fa fa-space-shuttle fa-rotate-180 pull-right"
							title="隐藏/打开侧边栏"></i>
					</div>


					<div class="margin-top-10 row col-xs-12"></div>
					<div class="hide row col-xs-12">
						<hr></hr>
					</div>



					<div id="timediv" class=" hide row col-xs-12 col-md-9 col-lg-9">

						<div class="pageText timeinfo">

							<div id="license_information">

								<p>
									<i class=" fa fa-exclamation-triangle"></i> 本文最后更新于<span
										id="days"></span>天前,文中介绍内容及环境可能已不适用.请谨慎参考.
								</p>
							</div>


							<p></p>


						</div>
					</div>



					<div class=" col-xs-12 row nopaddding">
						<div class="pageText">
							<div class="pctnew  "><p>每次写存储过程都是个挑战，不过每次写完，写好了，感觉都蛮不错的。</p>

<p>嘿嘿，看看，感觉良好。</p>

<p>&nbsp;</p>

<p>其实有时候，我感觉不一定非得用存储过程，不过既然老大要求，那也没办法呢，做呢。</p>

<p>当然，这个确实是可以使用存储过程的呢。</p>

<p>&nbsp;</p>

<pre>
<code class="language-sql">DROP PROCEDURE IF EXISTS `clean_off_route`;
DELIMITER ;;
CREATE DEFINER=`root`@`%` PROCEDURE `clean_off_route`(IN psvrid varchar(30),IN savedata varchar(30),out routeids varchar(30)) COMMENT '清除超时或者使用完成的路由，并下线'
begin 

  declare maxnum INTEGER DEFAULT 6; -- 路由公司最大使用次数，超过该次数，下线
declare maxnousehour INTEGER DEFAULT 3; -- 路由最大大无使用时间，大于该时间、下线

declare v_finished INTEGER DEFAULT 0;
declare pid varchar(30) default "";
 declare rid varchar(30) default "";
 declare rtype varchar(30) default "";




 DECLARE _Cur CURSOR for
select proxyserver_id,routeid,type from (
-- 过滤中转服务器、在线状态
select * from (
-- 全量1条件过滤
select * from (
-- 全量1--路由公司使用次数---
select r.proxyserver_id,r.flag,r.free,rcnums.*,'maxuse' type from route_info r left join
(
select routeid,companyid,count(*) num from (

-- 关联路由使用记录-公司
select rus.*, pcpsvr.companyid from route_use_log  rus
left JOIN
(
-- 手机账号-公司 中转服务器-，，对应关系
select cphone.phoneip,cphone.accountid,cpsvr.* from 
(
select 
substring_index(p.ip , '.',3) phone_ippre,p.accountid
,cast(substring_index(p.ip , '.',-1)  as SIGNED INTEGER) phone_iplast,
c.accountid companyid,c.company_name,p.accountid phoneaccount,p.city phonecity,p.ip phoneip from phoneaccount_info p LEFT JOIN company_info c on c.accountid=p.company_userid
order by c.accountid
) cphone
left join
(
select substring_index(substring_index(cp.ipdesc, '-',1), '.',3) ippre
, cast( substring_index(substring_index(cp.ipdesc, '-',1), '.',-1) as SIGNED INTEGER) ipstart
,cast( substring_index(substring_index(cp.ipdesc, '-',-1), '.',-1)  as SIGNED INTEGER) ipend
, psvr.id proxyserver_id ,psvr.assignphones,psvr.maxphones,cp.companyid,cp.ipdesc from proxyserver_info psvr left join company_proxyserver cp on psvr.id=cp.proxyserver_id
) cpsvr 
 on (cpsvr.companyid=cphone.companyid
 and cphone.phone_ippre=cpsvr.ippre 
 and cphone.phone_iplast&gt;=cpsvr.ipstart
 and cphone.phone_iplast&lt;=cpsvr.ipend 
) 
 -- 手机账号-公司 中转服务器-，，对应关系--end
) pcpsvr on rus.phoneip=pcpsvr.phoneip

) rtcmp  where time&gt;DATE_SUB(now(),INTERVAL 24 HOUR)  group by companyid ,routeid order by count(*) desc
) rcnums on r.routeid=rcnums.routeid
-- 全量1--路由公司使用次数--- end
) tmax where tmax.num&gt;maxnum 

union
(
-- 查询
select * from (
-- 全量2，xx小时内没有时间记录
select r.proxyserver_id,r.flag,r.free,r.routeid,rcnums.num,'' companyid,'nouse' type from route_info r left join
(

select routeid,count(*) num  from route_use_log where
 time&gt;DATE_SUB(now(),INTERVAL maxnousehour HOUR)  group by routeid 
) rcnums on r.routeid=rcnums.routeid
-- 全量2，xx小时内没有时间记录--end
) tuse where tuse.num is null
)

) tall where proxyserver_id=psvrid and flag=2
) tall2;

DECLARE CONTINUE HANDLER 
FOR NOT FOUND SET v_finished = 1;


set routeids = "xxxx";


set v_finished = 0;
-- 循环处理
OPEN _Cur;
dowork: LOOP
 FETCH _Cur INTO  pid,rid,rtype;

 IF v_finished = 1 THEN 
 LEAVE dowork;
 END IF;


-- insert into  mysql_pro_log   values(concat(pid,rid,rtype,date_format(now(),'%Y-%m-%d %H'),' '),now());

  -- 操作
  -- 处理返回
   set routeids= concat(routeids,",",rid) ;

if(savedata='true') then

  -- 表状态
 select routeid into rid from route_info where proxyserver_id=psvrid and routeid=rid and flag=2;
 if(rid is not null) then    -- 过滤
   --  路由状态
   update route_info set flag=0,free=0,offlinetime=now() ,proxyserver_id="" where proxyserver_id=psvrid and routeid=rid;
    -- 下线时间
	 update route_log_Info set offlinetime=now(),offlinetype="0" where offlinetime is null and routeid=rid and proxyserver_id=pid;

    
    if(rtype = 'maxuse') then
     --  服务完成
    insert into server_complete_route values(pid,rid,now());
    end if;
 end if;
end if;


 
END LOOP dowork;
CLOSE _Cur;


end
;;
DELIMITER ;
</code></pre>

<p>&nbsp;</p>
</div>
						</div>


					</div>

					<br>
						<div class="postdiv row col-xs-12 margin-top-5 left ">
							<span title="最后更新于"><i class="fa fa-pencil-square "></i>&nbsp;2018-01-07 20:45:31&nbsp;
							</span>
						</div>

						<div class="row col-xs-12 margin-top-10">
							<div class="good">
								<span class="sout"> <span class="fa fa-stack fa-lg"
									ng-click="good() "> <i
										class="fa fa-circle fa-stack-2x topcircle2"></i> <i
										class=" zan fa fa-thumbs-up fa-stack-1x fa-inverse"
										title="写的不错"></i> <span>&nbsp;<span id="gdnum"
											class="goodnum" ng-bind-html="goodnum|sanitize">4</span></span>

								</span> <span>赞</span>
								</span> <span class="sout"> <span class="fa fa-stack fa-lg"
									ng-click="pay() "> <i
										class="fa fa-circle fa-stack-2x topcircle3"></i> <i
										class="pay fa fa-dollar fa-stack-1x fa-inverse" title=" 我要打赏"></i>

								</span> <span>赏</span>
								</span>
							</div>
						</div>


						<div class="row col-xs-12">
							<hr></hr>
						</div>
				</div>


				<div class=" prenexlist col-xs-12 row tablefoot">
					<ul class="pagination pull-left">
						<li>
								<a
									href="/kb/public/html/2017/12/479d6e1f-ed72-4a9b-9cf0-38cd05360b1b.html"
									title="上一篇" style="" class="for spider"><i
									class="fa fa-arrow-circle-left"></i>&nbsp;ckeditor工具栏编辑问题</a>
							</li>
					</ul>
					<ul class="pagination pull-right">
						<li>
								<a
									href="/kb/public/html/2018/01/73fb3691-f723-4dd2-81ba-f490525f2ad1.html"
									title="下一篇" style="" class="for spider">阿里云ECS服务器ubuntu界面配置问题处理
									&nbsp;<i class="fa fa-arrow-circle-right"></i>&nbsp;
								</a>
							</li>
					</ul>




				</div>





				<div class="row col-xs-12 ">

					<div class=" lincense">

						<div id="license_information">

							<p>

								<i class="fa fa-hand-o-right"></i>&nbsp; 本文基于<a
									href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" title="CC BY-NC-ND 4.0"
									target="_blank">CC BY-NC-ND 4.0</a> 许可协议发布,作者：<a
									href="http://www.256kb.cn/" class="authorf">野生的喵喵</a>。 <span>
									固定链接： <a class="pagelink"
									href="http://127.0.0.1:8081//public/html/2017/12/b95ee7f5-8cd1-471b-8ba8-ad1fb6e9a4ab.html">【Mysql存储过程】</a>
									转载请注明
								</span>
							</p>
							<p></p>
						</div>


						


					</div>
				</div>







				<div class="row col-xs-12 margin-top-10">
					<div id='googlead'></div>
				</div>

				<div class="row col-xs-12">
					<hr></hr>
				</div>
				<div class="row  col-xs-12 ">
					<p>
						<i class="fa fa-puzzle-piece"></i>&nbsp;相关文章:
					</p>
					<div class="nopadding-left row relatedLink">

						<ul class="col-xs-12 ">

							
								<li><span class="col-xs-2"><img
										class="rimg nopaddding img-responsive "
										title="测试"
										src="http://127.0.0.1:8081/kb/file/apk/201801/93067979-1359-490a-9f64-94aabde3d7fe.jpg"></span> <a
									href="/kb/public/html/2017/11/13892f60-8e5f-48b9-b479-a2a5097a0150.html"
									class="col-sm-8 col-xs-11 ">test2</a></li>
							



						</ul>


					</div>
				</div>

				<div class="row col-xs-12 margin-top-10">
					<div id='googlead_link'></div>
				</div>


				<canvas id="myCanvas"></canvas>
				<div class="modal fade " id="payMd" data-backdrop="static"
					tabindex="-1 " role="dialog " aria-labelledby="myModalLabel "
					aria-hidden="true">
					<div class="modal-dialog paybody">
						<div class="modal-content ">
							<div class="modal-header " style="border-bottom: 0px">
								<button type="button " class="close " data-dismiss="modal"
									aria-hidden="true ">&times;</button>
								<h4 class="modal-title " id="myModalLabel ">打赏方式:</h4>
							</div>



							<div class="modal-body  ">
								<div class="col-xs-12 ">
									<div class='pcenter'>


										<ul class="pul">
											<li><label><input class='paytype' name='paytype'
													checked="checked" for="#pp1" type='radio'>微信</label></li>
											<li><label><input class='paytype' name='paytype'
													for="#pp2" type='radio'>支付宝</label></li>
										</ul>


										<div class="tab-content paycontent">
											<div class="row  col-xs-12 tab-pane fade in active " id="pp1">
												<div class='pbord'>


													<img class='img-responsive'
														src='/kb/public/detail/weixin.png'></img>

													<div class='ptip'>微信</div>
												</div>
											</div>
											<div class="row  col-xs-12 tab-pane fade in  " id="pp2">
												<div class='pbord alip'>


													<img class='img-responsive'
														src='/kb/public/detail/zhifub.png'></img>

													<div class='ptip'>支付宝</div>
												</div>
											</div>
										</div>

									</div>


								</div>

							</div>
						</div>

					</div>
				</div>



			</div>




			

<div class="row col-xs-12" id="commet">
	<hr></hr>
</div>
<div ng-cloak>


	<!--   <div ng-repeat="x in rdatalist" id="cblock"> -->


	<div id="cblock">
		<div class="hide row col-lg-10 replayblock b1">

			<div class="pull-left">
				<a id="f91" href="https://ddd.com" onclick="return gourl(this);"
					title="大虎-https://ddd.com"> <img class="rheadpic"
					src="https://www.gravatar.com/avatar/b50114d6569e96528aeca04430fe0a09?s=55&amp;r=pg&amp;d=identicon">
				</a>
			</div>

			<div class="col-xs-10">
				<div>
					<span>大虎</span><span class="rptime text-right">&nbsp;2019-01-13
						17:26:45 </span>
				</div>
				<div class="rcct">好战的一部，好！！</div>
				<div class="row  margin-bottom-5">
					<a href="#f91" class="ba1 replaybtn  text-info margin-right-20"
						onclick="beginReplay(this,'91')">回复</a>
				</div>
				<div class=" rcblock"></div>

			</div>

		</div>
		<!-- <div class="row col-xs-12 ">

                <div class="row col-lg-10 replayblock b1">


                    <div class="hide" id="f{{rnum-$index}}">{{rnum-$index}}楼&nbsp;<a href="{{x.user_blog}}" title="{{x.user_blog}}">{{x.userid}}</a> <span class="pull-right text-right">&nbsp;{{x.create_date}}</span> </div>

                    <div id="f{{rnum-$index}}"><a ng-href="{{x.user_blog}}"   onclick="return gourl(this);"  title="{{x.user_blog}}">{{x.userid}}  </a> <span class=" text-right">&nbsp;{{x.create_date}} </span>
                    
                    <span  ng-show="root">【  <a  ng-show="x.state!=1" href="#f{{rnum-$index}}" class="   text-success margin-right-20" onclick="pass(this,'{{x.recordid}}')">审核通过</a>&nbsp;
                                       <a href="#f{{rnum-$index}}" class="   text-warning margin-right-20" onclick="del(this,'{{x.recordid}}')">删除</a>】
                                       </span>
                    </div>

                    <div class="rcct">{{x.content}}</div>
                    <div class="row  margin-bottom-5">

                        <a href="#f{{rnum-$index}}" class="ba1 replaybtn  text-info margin-right-20" ng-click="beginReplay($event,x)">回复</a>
                    
                    </div>

                    <div class=" rcblock">
                        <div ng-repeat="t in x.reback" class="replayblock b2">
                            <div id=""><a ng-href="{{t.user_blog}}"  onclick="return gourl(this)"   title="{{t.user_blog}}">{{t.userid}}</a> @ <a href="{{t.tuser_blog}}" title="{{t.tuser_blog}}">{{t.tuid}}</a> <span class=" text-right">&nbsp;{{t.create_date}}</span>
                            
                                 <span  ng-show="root">【  <a  ng-show="x.state!=1" href="#f{{rnum-$index}}" class="   text-success margin-right-20" onclick="pass(this,'{{x.recordid}}')">审核通过</a>&nbsp;
                                       <a href="#f{{rnum-$index}}" class="   text-warning margin-right-20" onclick="del(this,'{{x.recordid}}')">删除</a>】
                                       </span>
                             </div>
                            <div class="rcct">{{t.content}}</div>
                            <div class="row  margin-bottom-5">

                                <a href="#ff{{rnum-$index}}" class=" replaybtn text-info margin-right-20" ng-click="beginReplay($event,t,x)">回复</a>
                            
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
	</div>
</div>

<div id="rdivc"></div>
<div class="row replay col-xs-12 margin-bottom-10" id="rpdiv">
	<div class="row">
		<span style="padding-left: 10px; line-height: 30px">发表新的评论</span>
	</div>
	<div class="row">
		<form name="fm" id="fm" class=" padding-left-0 col-xs-12"
			style="min-width: 150px;">




			<div class="ckdisplay form-group col-xs-12 row ">
				<div class="control-label padding-left-0 padding-top-0  " ng-cloak>
					<img src="{{s_icon}}"><span class='gname'><span
						class='rname' ng-cloak>{{s_uid}} </span>&nbsp;<span
						class="cmodify"><i class="fa fa-refresh" id="btnChangeName"
							title="修改信息"></i></span> ,&nbsp;欢迎回来. </span>
				</div>
			</div>

			<div class="nameinfo">
				<div class="form-group col-xs-12 row ">
					<div
						class="control-label padding-top-0 padding-left-0 text-left col-xs-12 ">
						您的称呼(<span class='red'>*</span>必填)：
					</div>
					<div class="col-sm-9 col-xs-12 text-right nopaddding">
						<input required type="text" class="form-control " name="s_uid"
							id="s_uid" ng-model="s_uid" placeholder="您的称呼 ">
					</div>
					<div class="col-xs-12 col-xs-offset-4 row "></div>
				</div>

				<div class="form-group col-xs-12 row ">
					<div
						class="control-label padding-top-0 padding-left-0 text-left col-xs-12 ">
						您的邮箱地址(<span class='red'>*</span>必填,您的邮箱地址不会公开,仅作为有回复后的消息通知手段)：
					</div>
					<div class="col-sm-9 col-xs-12 text-right nopaddding">
						<input type="text" class="form-control " name="s_email"
							id="s_email" ng-model="s_email" placeholder=" ">
					</div>
					<div class="col-xs-12 col-xs-offset-4 row "></div>
				</div>

				<div class="form-group col-xs-12 row ">
					<div
						class="control-label padding-top-0 padding-left-0 text-left col-xs-12 ">您的站点地址(选填)：</div>
					<div class="col-sm-9 col-xs-12 text-right nopaddding">
						<input type="text" class="form-control " name="s_ublog"
							id="s_ublog" ng-model="s_ublog" placeholder=" 您的站点地址(欢迎互访)：">
					</div>
					<div class="col-xs-12 col-xs-offset-4 row "></div>
				</div>





			</div>

			<div class="form-group col-xs-12 row ">
				<div class="control-label padding-left-0 padding-top-0 col-xs-12 ">


					<span>留言：</span>
				</div>
				<div class="col-sm-9 col-xs-12 text-right nopaddding ">
					<textarea required type="text" rows="4" class="form-control "
						name="s_text" id="s_text" ng-model="s_text"
						placeholder=您的留言经过审核后才会显示出来.">
															 </textarea>

					<div class="  ">
						<div class=""  >
							<div class="row">
								<h3 class="panel-title em_start  " data-toggle="collapse"
							data-parent="#eemj" href="#collapseEmj" title="来点表情？" >∑( ° △ °|||)︴</h3>
							</div>
						</div>


						<div id="collapseEmj" class="emj panel-collapse collapse  ">
							<div class="">

								<div  class="emjcontainer">


									<div class="em_item catsay" title="耶！">(๑•̀ㅂ•́)و✧</div>
									<div class="em_item catsay" title="得意"><(￣）￣)></div>
									<div class="em_item catsay" title="乾杯">[]~(￣▽￣)~*</div>
									<div class="em_item catsay" title="满足">(￣ˇ￣)</div>
									<div class="em_item catsay" title="乾杯">[]~(￣▽￣)~*</div>
									<div class="em_item catsay" title="满足">(￣ˇ￣)</div>
									<div class="em_item catsay" title="无耐">╮(￣▽￣)╭</div>
									<div class="em_item catsay" title="被打一巴掌">(￣ε(#￣)</div>
									<div class="em_item catsay" title="惊讶">(⊙ˍ⊙)</div>
									<div class="em_item catsay" title="装傻">(￣▽￣)~*</div>
									<div class="em_item catsay" title="惊吓">∑( ° △ °|||)︴</div>

								</div>



							</div>
						</div>
					</div>



				</div>
				<div class="col-xs-12 col-xs-offset-4 row "></div>
			</div>






		</form>
	</div>
	<div class="col-lg-10 row">
		<button id="sbtn" type="button " class="btn btn-info  col-lg-2 "
			ng-click="replay() ">回复</button>
		<button id="cbtn" type="button "
			class="hide btn btn-warning col-lg-offset-1 col-lg-2 "
			ng-click="canc() ">取消</button>
	</div>
</div>



<div class="modal fade " id="myModal3" tabindex="-1 " role="dialog "
	aria-labelledby="myModalLabel " aria-hidden="true">
	<div class="modal-dialog " style="width: 250px;">
		<div class="modal-content ">
			<div class="modal-header ">
				<button type="button " class="close " data-dismiss="modal"
					aria-hidden="true ">&times;</button>
				<h4 class="modal-title " id="myModalLabel ">确认操作</h4>
			</div>



			<div class="modal-body container margin-top-10 ">
				<div class="row ">

					<p class="col-xs-10 ">确认执行操作吗？</p>

				</div>
			</div>
			<div class="modal-footer ">
				<button type="button" class="btn btn-default btn-warning "
					data-dismiss="modal">取消</button>
				<button id="btnconfirm" type="button " class="btn btn-primary ">
					确定</button>
			</div>
		</div>
	</div>
</div>





<!-- 

乾杯 []~(￣▽￣)~*

满足 (￣ˇ￣)

没睡醒 (￣﹏￣)

狡猾(｀﹏′)

被打一巴掌 (￣ε(#￣)

无言 (￣.￣)

无奈 ╮(￣▽￣)╭

装傻 (￣▽￣)~*

惊讶 (⊙ˍ⊙)

发现(￣.￣)+

惊吓 ∑( ° △ °|||)︴

冷 (￣▽￣)" -->


		</div>

	</div>



	<div class="result" id="outdiv">
		<div class="indiv">
			<img class="imgresult" id="bigimg" src="">
		</div>
	</div>




	<script type="text/javascript"
		src="/kb/js/plugin/jquery/jquery.lazyload.v.1.9.1.js"></script>


	<script type="text/javascript" src="/kb/public/detail/index.js"></script>
	<script type="text/javascript"
		src="/kb/public/detail/replay.js"></script>


	<script type="text/javascript"
		src="/kb/js/own/automenu/jquery.autoMenu.js"></script>





			</div>

			<div class="col-sm-3 col-xs-12 pright">

			

			</div>
			</div>

		</div>





<div class="modal fade " id="myModal_outurl" tabindex="-1 " role="dialog " aria-labelledby="myModalLabel " aria-hidden="true">
				<div class="modal-dialog " style="width: 250px; ">
					<div class="modal-content ">
						<div class="modal-header ">
							<button type="button " class="close " data-dismiss="modal" aria-hidden="true ">&times;</button>
							<h4 class="modal-title " id="myModalLabel ">操作确认</h4>
						</div>



						<div class="modal-body container margin-top-10 ">
							<div class="row ">

								<p class="col-xs-10 msgtitle-md ">确认要访问该网站吗？</p>

							</div>
						</div>
						<div class="modal-footer ">
							<button type="button" class="btn btn-default btn-info " data-dismiss="modal">取消
							</button>
							<button id="btnconfirm_outurl"  type="button " class="btn btn-warning "> 确定 </button>
						</div>
					</div>
				</div>
			</div>





		



<div class="row kfootpanel">


	<div class="col-xs-12 row kfoot  ">



		<ul class="nopaddding">
			<li><a href="http://www.256kb.cn"><i class="fa fa-home"></i>&nbsp;首页</a></li>

			<li><a href="http://www.256kb.cn/public/search/"><i class="glink fa fa-google"></i>&nbsp;Google搜索</a></li>
			<!-- <li><a href="http://www.256kb.cn/public/wuliu/"><i class="fa fa-truck"></i>&nbsp;快递查询</a></li> -->
			<li><a href="http://kg.256kb.cn/s/search/"><i class="fa fa-search"></i>&nbsp;个站搜索</a></li>
			<li><a href="http://kg.256kb.cn/s/url/"><i class="fa fa-link"></i>&nbsp;常用链接</a></li>
			<li><a href="http://www.256kb.cn/rss"><i class="fa fa-rss"></i>&nbsp;订阅RSS</a></li>
			<li><a href="http://www.256kb.cn/public/about/"><i class="fa fa-info-circle"></i>&nbsp;关于</a></li>



		</ul>

	</div>
</div>


<script>
$(function(){
	$("#right_boot").html("KxのBook@Copyright 2017-"+new Date().getFullYear()+" All Rights Reserved");
})
</script>


<div class="col-xs-12 row kfootend">
	<span id="right_boot">KxのBook@Copyright 2017- All Rights Reserved</span> <br> <span>Designed
		and themed by <a href="https://256kb.cn/">野生的喵喵</a>
	</span> &nbsp;<span><span
		class=" " title="总访问量"><span class=" glyphicon glyphicon-eye-open"></span>&nbsp;<span class="pagevisit">4754</span></span>
		&nbsp;<span class=" " title="访客数"><i class=" fa fa-user"></i>&nbsp;<span class="uservisit">146</span></span>
	</span>

</div>


<script type="text/javascript" src="/kb/js/own/sprite.js?a=1"></script>




		
		
		

<script type="text/javascript"
	src="/kb/js/plugin/jquery/jquery-ui.js"></script>
<script type="text/javascript"
	src="/kb/js/plugin/bootstrap/js/bootstrap.min.js"></script>


<script>

function otherScroll3(){
	  var scrollTop = document.documentElement.scrollTop + document.body.scrollTop;
	  var page=$(".lastright").offset().top;
	  var height=$(".lastright").height();
	  if(scrollTop>page+height+20){
		  //mobile, declare in other common js
		  if(browser&&!browser.mobile)
			  {
			//  $(".panel.card").addClass('fixed2');
			 /*  $(".panel.siderabout").addClass('fixed2'); */
			  }
		  
	  }
	  else{
		//  $(".panel.card").removeClass('fixed2');
		  /* $(".panel.siderabout").removeClass('fixed2'); */
	  }
}
</script>






<div id='googleadcode_bottom' style='display: none'>

	
	<ins class="adsbygoogle bottom_detail_big" style="display: block"
		data-ad-client="ca-pub-4823081228661631" data-ad-slot="2310500588"
		data-ad-format="auto" data-full-width-responsive="true"></ins>
	<script>
		//(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
</div>


<div id='googleadcode_d_right' style='display: none'>

	
	<ins class="adsbygoogle" style="display: block"
		data-ad-client="ca-pub-4823081228661631" data-ad-slot="2310500588"
		data-ad-format="auto" data-full-width-responsive="true"></ins>
	<script>
		//(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
</div>

<div id='googleadcode3' style='display: none'>
	
	
	<ins class="adsbygoogle" style="display: block"
		data-ad-client="ca-pub-4823081228661631" data-ad-slot="2310500588"
		data-ad-format="auto" data-full-width-responsive="true"></ins>
	<script>
		//(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
</div> 

<div id='googleadcode_link' style='display: none'>
	
	
	<ins class="adsbygoogle" style="display: block"
		data-ad-client="ca-pub-4823081228661631" data-ad-slot="2310500588"
		data-ad-format="auto" data-full-width-responsive="true"></ins>
	<script>
		//(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
</div> 

<script language='javascript'>
	
function include_js(jspath,callback) {
    var _doc = document.getElementsByTagName('head')[0];
    var js = document.createElement('script');
    js.setAttribute('type', 'text/javascript');
    js.setAttribute('src', jspath);
    _doc.appendChild(js);
    if (document.all) {
        js.onreadystatechange = function() {
            if (js.readyState == 'loaded' || js.readyState == 'complete') {
            	if(typeof(callback)=='function')
            	callback();// alert('IE6、IE7 support js.onreadystatechange');
            }
        }
    } else {
        js.onload = function() {
            //alert('Firefox、chrome and others support js.onload');
        	if(typeof(callback)=='function')
            	callback();
        }
    }
}
//include_js('http://static2.baihe.com/js/finallyBaiheHead.js?time=20141120');
	
	
$(document).ready(function(){
	  
	
	
	var googleJs = "//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";
    
	//loadads();
	setTimeout(function(){
		//include_js(googleJs);
	}, 3000);
	

	
	
function loadads(){
	
	
	/* 
	 (adsbygoogle = window.adsbygoogle || []).push({
         google_ad_client: "ca-pub-4823081228661631",  
          enable_page_level_ads: true 
      
      }); 
return ;     */
	
	
	
	
	
	if (document.all.item('googlead3') != null) {
		googlead3.innerHTML = googleadcode3.innerHTML;
	}

	if (document.all.item('googlead2') != null) {
		googlead2.innerHTML = googleadcode_d_right.innerHTML;
	}

	if (document.all.item('googlead') != null) {
		googlead.innerHTML = googleadcode_bottom.innerHTML;
	}
	
	if (document.all.item('googlead_link') != null) {
		googlead_link.innerHTML = googleadcode_link.innerHTML;
	}
	
	
		(adsbygoogle = window.adsbygoogle || []).push({});
		(adsbygoogle = window.adsbygoogle || []).push({});
		(adsbygoogle = window.adsbygoogle || []).push({});
		(adsbygoogle = window.adsbygoogle || []).push({});	
}
	 	 
	});
	
	
	
</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-126706596-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-126706596-1');
</script>
				
</body>




</html>



